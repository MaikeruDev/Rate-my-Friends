{"version":3,"file":"firebaseui-angular.js","sources":["../../projects/firebaseui-angular-library/src/lib/firebaseui-angular-library.service.ts","../../projects/firebaseui-angular-library/src/lib/firebaseui-angular-library.component.ts","../../projects/firebaseui-angular-library/src/lib/firebaseui-angular-library.helper.ts","../../projects/firebaseui-angular-library/src/lib/firebaseui-angular-library.module.ts","../../../projects/firebaseui-angular-library/src/public_api.ts","../../../projects/firebaseui-angular-library/src/firebaseui-angular.ts"],"names":["firebaseui.auth","firebaseuiOriginal"],"mappings":"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","sourcesContent":["import {Inject, Injectable, NgZone, Optional} from '@angular/core';\nimport * as firebaseui from 'firebaseui';\nimport {FIREBASE_APP_NAME, FIREBASE_OPTIONS, FirebaseApp, FirebaseAppConfig, FirebaseOptions, ɵfirebaseAppFactory} from '@angular/fire';\n\n@Injectable()\nexport class FirebaseuiAngularLibraryService {\n  public firebaseUiInstance: firebaseui.auth.AuthUI;\n\n  constructor(@Inject(FIREBASE_OPTIONS) options: FirebaseOptions,\n              @Optional() @Inject(FIREBASE_APP_NAME) nameOrConfig: string | FirebaseAppConfig | null | undefined,\n              zone: NgZone) {\n    // noinspection JSNonASCIINames\n    const app: FirebaseApp = ɵfirebaseAppFactory(options, zone, nameOrConfig);\n    // store the firebaseui instance on the window object to prevent double initialization\n    if (!(<any>window).firebaseUiInstance) {\n      (<any>window).firebaseUiInstance = new firebaseui.auth.AuthUI(app.auth());\n    }\n    this.firebaseUiInstance = (<any>window).firebaseUiInstance as firebaseui.auth.AuthUI;\n  }\n}\n","import {Component, EventEmitter, Inject, NgZone, OnDestroy, OnInit, Output} from '@angular/core';\nimport {AngularFireAuth} from '@angular/fire/auth';\nimport {Subscription} from 'rxjs';\nimport {\n  FirebaseUISignInFailure,\n  FirebaseUISignInSuccessWithAuthResult,\n  NativeFirebaseUIAuthConfig,\n} from './firebaseui-angular-library.helper';\nimport * as firebaseui from 'firebaseui';\nimport firebase from 'firebase/app';\nimport {FirebaseuiAngularLibraryService} from './firebaseui-angular-library.service';\nimport 'firebase/auth';\nimport User = firebase.User;\nimport UserCredential = firebase.auth.UserCredential;\n\n@Component({\n  selector: 'firebase-ui',\n  template: '<div id=\"firebaseui-auth-container\"></div>'\n})\nexport class FirebaseuiAngularLibraryComponent implements OnInit, OnDestroy {\n  private static readonly COMPUTED_CALLBACKS = 'COMPUTED_CALLBACKS';\n\n  @Output('signInSuccessWithAuthResult') signInSuccessWithAuthResultCallback: EventEmitter<FirebaseUISignInSuccessWithAuthResult> = new EventEmitter(); // tslint:disable-line\n  @Output('signInFailure') signInFailureCallback: EventEmitter<FirebaseUISignInFailure> = new EventEmitter(); // tslint:disable-line\n  @Output('uiShown') uiShownCallback: EventEmitter<void> = new EventEmitter(); // tslint:disable-line\n\n  private subscription: Subscription;\n\n  constructor(private angularFireAuth: AngularFireAuth,\n              @Inject('firebaseUIAuthConfig') private _firebaseUiConfig: NativeFirebaseUIAuthConfig,\n              @Inject('firebaseUIAuthConfigFeature') private _firebaseUiConfig_Feature: NativeFirebaseUIAuthConfig,\n              private ngZone: NgZone,\n              private firebaseUIService: FirebaseuiAngularLibraryService) {\n  }\n\n  get firebaseUiConfig(): NativeFirebaseUIAuthConfig {\n    return {\n      ...this._firebaseUiConfig,\n      ...this._firebaseUiConfig_Feature\n    } as NativeFirebaseUIAuthConfig;\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.angularFireAuth.authState.subscribe((value: User) => {\n      if ((value && value.isAnonymous) || !value) {\n        if (this.firebaseUiConfig.signInOptions.length !== 0) {\n          this.firebaseUIPopup();\n        } else {\n          throw new Error('There must be at least one AuthProvider.');\n        }\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (!!this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  private getUIAuthConfig(): NativeFirebaseUIAuthConfig {\n    if (!(this.firebaseUiConfig as NativeFirebaseUIAuthConfig).callbacks) {\n      this._firebaseUiConfig[FirebaseuiAngularLibraryComponent.COMPUTED_CALLBACKS] = true;\n      (this._firebaseUiConfig as NativeFirebaseUIAuthConfig).callbacks = this.getCallbacks();\n    }\n    return (this.firebaseUiConfig as NativeFirebaseUIAuthConfig);\n  }\n\n  private firebaseUIPopup() {\n    const firebaseUiInstance = this.firebaseUIService.firebaseUiInstance;\n    const uiAuthConfig = this.getUIAuthConfig();\n\n    // Check if callbacks got computed to reset them again after providing the to firebaseui.\n    // Necessary for allowing updating the firebaseui config during runtime.\n    let resetCallbacks = false;\n    if (uiAuthConfig[FirebaseuiAngularLibraryComponent.COMPUTED_CALLBACKS]) {\n      resetCallbacks = true;\n      delete uiAuthConfig[FirebaseuiAngularLibraryComponent.COMPUTED_CALLBACKS];\n    }\n\n    // show the firebaseui\n    firebaseUiInstance.start('#firebaseui-auth-container', uiAuthConfig);\n\n    if (resetCallbacks) {\n      (this._firebaseUiConfig as NativeFirebaseUIAuthConfig).callbacks = null;\n    }\n  }\n\n  private getCallbacks(): any { // firebaseui.Callbacks\n    const signInSuccessWithAuthResultCallback = (authResult: UserCredential, redirectUrl) => {\n      this.ngZone.run(() => {\n        this.signInSuccessWithAuthResultCallback.emit({\n          authResult,\n          redirectUrl\n        });\n      });\n      return this.firebaseUiConfig.signInSuccessUrl;\n    };\n\n    const signInFailureCallback = (error: firebaseui.auth.AuthUIError) => {\n      this.ngZone.run(() => {\n        this.signInFailureCallback.emit({\n          code: error.code,\n          credential: error.credential\n        });\n      });\n      return Promise.reject();\n    };\n\n    const uiShownCallback = () => {\n      this.ngZone.run(() => {\n        this.uiShownCallback.emit();\n      });\n    };\n\n    return {\n      signInSuccessWithAuthResult: signInSuccessWithAuthResultCallback,\n      signInFailure: signInFailureCallback,\n      uiShown: uiShownCallback\n    };\n  }\n}\n","/*\n * Created by Raphael Jenni\n * Copyright (c) 2017 Raphael Jenni\n */\n\nimport * as firebaseuiOriginal from 'firebaseui';\nimport firebaseOriginal from 'firebase/app';\nimport UserCredential = firebaseOriginal.auth.UserCredential;\nimport AuthCredential = firebaseOriginal.auth.AuthCredential;\n\nexport const firebase = firebaseOriginal;\nexport const firebaseui = firebaseuiOriginal;\n\nexport type NativeFirebaseUIAuthConfig = firebaseuiOriginal.auth.Config;\n\n\nexport class FirebaseUISignInSuccessWithAuthResult {\n  authResult: UserCredential;\n  redirectUrl: string;\n}\n\nexport class FirebaseUISignInFailure {\n  code: string;\n  credential: AuthCredential;\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {FirebaseuiAngularLibraryComponent} from './firebaseui-angular-library.component';\nimport {CommonModule} from '@angular/common';\nimport {NativeFirebaseUIAuthConfig} from './firebaseui-angular-library.helper';\nimport {FirebaseuiAngularLibraryService} from './firebaseui-angular-library.service';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [FirebaseuiAngularLibraryComponent],\n  providers: [FirebaseuiAngularLibraryService],\n  exports: [FirebaseuiAngularLibraryComponent]\n})\nexport class FirebaseUIModule {\n  static forRoot(firebaseUiAuthConfig: NativeFirebaseUIAuthConfig): ModuleWithProviders<FirebaseUIModule> {\n    return {\n      ngModule: FirebaseUIModule,\n      providers: [\n        {provide: 'firebaseUIAuthConfig', useValue: firebaseUiAuthConfig},\n        {provide: 'firebaseUIAuthConfigFeature', useValue: {}}\n      ]\n    };\n  }\n\n  static forFeature(firebaseUIAuthConfig: NativeFirebaseUIAuthConfig | any): ModuleWithProviders<FirebaseUIModule> {\n    return {\n      ngModule: FirebaseUIModule,\n      providers: [\n        {provide: 'firebaseUIAuthConfigFeature', useValue: firebaseUIAuthConfig}\n      ]\n    };\n  }\n}\n","/*\n * Public API Surface of firebaseui-angular-library\n */\n\nexport * from './lib/firebaseui-angular-library.service';\nexport * from './lib/firebaseui-angular-library.component';\nexport * from './lib/firebaseui-angular-library.helper';\nexport * from './lib/firebaseui-angular-library.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"]}